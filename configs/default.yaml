# =============================================================================
# TIMEFLIES DEFAULT CONFIGURATION
# =============================================================================
# Shared settings across all projects. Project-specific overrides go in 
# project folders (fruitfly_aging/, fruitfly_alzheimers/)

# =============================================================================
# PROJECT SETTINGS
# =============================================================================
project: fruitfly_alzheimers  # <-- CHANGE THIS TO SWITCH PROJECTS

general:
  version: "0.2.0"
  random_state: 42

# =============================================================================
# HARDWARE CONFIGURATION  
# =============================================================================
hardware:
  processor: "GPU"  # Options: "GPU", "CPU", "M" (Apple Silicon)
  memory_growth: true

# =============================================================================
# DATA CONFIGURATION
# =============================================================================
data:
  # Core data settings
  model: "CNN"  # Options: "CNN", "MLP", "logistic", "xgboost", "random_forest"
  tissue: "head"  # Options: "head", "body", "all"
  species: "drosophila"
  cell_type: "all"
  sex: "all"  # Options: "all", "male", "female"
  encoding_variable: "age"  # Target variable for prediction
  
  # Data processing options
  batch_correction:
    enabled: false  # Set to true to use batch-corrected data
    
  filtering:
    include_mixed_sex: false
    
  sampling:
    samples: 1000  # null for all samples, or specify number
    variables: null  # null for all genes, or specify number
    
  # Train-test splitting strategies
  # Available methods:
  # - "random": Standard random split - IGNORES project overrides, uses test_ratio below
  # - "sex": Cross-sex generalization - USES sex settings from project config
  # - "tissue": Cross-tissue generalization - USES tissue settings from project config 
  # - "genotype": Aging acceleration analysis - USES genotype settings from project config
  split:
    method: "random"     # When "random", project split configs are ignored
    test_ratio: 0.2      # Only used for random splits

# =============================================================================
# FILE PATHS (AUTO-GENERATED FROM TEMPLATES)
# =============================================================================
# Uses template variables: {project}, {tissue}, {species}
paths:
  # Input/output data files
  data:
    train: "data/{project}/{tissue}/{species}_{tissue}_{project}_train.h5ad"
    eval: "data/{project}/{tissue}/{species}_{tissue}_{project}_eval.h5ad"
    original: "data/{project}/{tissue}/{species}_{tissue}_{project}_original.h5ad"
    
  # Batch-corrected versions
  batch_data:
    train: "data/{project}/{tissue}/{species}_{tissue}_{project}_train_batch.h5ad"
    eval: "data/{project}/{tissue}/{species}_{tissue}_{project}_eval_batch.h5ad"

# =============================================================================
# MODEL CONFIGURATION
# =============================================================================
model:
  # Shared training parameters only - architectures defined in project configs
  training:
    epochs: 100
    batch_size: 32
    validation_split: 0.2
    early_stopping_patience: 8
    learning_rate: 0.001

# =============================================================================
# PREPROCESSING CONFIGURATION
# =============================================================================
preprocessing:
  # Gene filtering options
  genes:
    remove_sex_genes: false          # Remove sex-linked genes
    remove_autosomal_genes: false    # Remove autosomal genes
    only_keep_lnc_genes: false       # Keep only long non-coding genes
    remove_lnc_genes: false          # Remove long non-coding genes
    remove_unaccounted_genes: false  # Remove unaccounted genes
    highly_variable_genes: false     # Filter for highly variable genes
    
  # Gene balancing
  balancing:
    balance_genes: false
    balance_lnc_genes: false
    
  # Gene shuffling
  shuffling:
    shuffle_genes: false

# =============================================================================
# DATA PROCESSING CONFIGURATION
# =============================================================================
data_processing:
  # Data normalization
  normalization:
    enabled: false

# =============================================================================
# ANALYSIS CONFIGURATION  
# =============================================================================
analysis:
  # Exploratory data analysis
  eda:
    enabled: false
    
  # Run project-specific analysis scripts
  run_analysis_script:
    enabled: false  # Set to true to run project-specific analysis after training
    
# Feature importance analysis
interpretation:
  shap:
    enabled: false           # Enable/disable SHAP interpretation (includes visualizations)
    load_existing: false     # Load existing SHAP values instead of computing
    reference_size: 100      # Reference size for SHAP analysis

# Visualizations
visualizations:
  enabled: true             # Enable general visualizations (training plots, confusion matrix, ROC curves, etc.)

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
logging:
  level: "INFO"              # Options: "DEBUG", "INFO", "WARNING", "ERROR", "CRITICAL"
  format: "detailed"         # Options: "simple", "detailed", "json"
  to_file: false             # Save logs to file
  directory: "logs"          # Log directory
  filename: "timeflies.log"  # Log filename